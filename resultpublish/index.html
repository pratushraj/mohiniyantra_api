<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RajaRani Mohini Coupons | Home</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Questrial&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="favicon.png">
    <script src="config.js"></script>
    <style>
        :root {
            --bg-yellow: #f3728f;
            --text-red: #ff0000;
            --border-blue: #00ccff;
            --premium-gold: #ecd5b9;
        }

        body {
            margin: 0;
            padding: 0;
            background: #f3728f !important;
            font-family: 'Questrial', Arial, sans-serif;
            overflow-x: hidden;
        }

        .header-actions {
            display: flex;
            justify-content: flex-end;
            padding: 15px 20px;
        }

        .btn-results {
            background: linear-gradient(to bottom, #eb2727 0%, #eb2727 44%, #a40000 50%, #7a0000 100%);
            color: #fff;
            border: 2px solid #555;
            border-radius: 8px;
            padding: 5px 30px;
            font-size: 20px;
            font-weight: bold;
            text-decoration: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        .info-bar {
            display: flex;
            justify-content: space-between;
            background: var(--bg-yellow);
            border-top: 2px solid #5c4c34;
            border-bottom: 2px solid #5c4c34;
            padding: 8px 20px;
            margin: 0 10px;
            font-weight: bold;
        }

        .info-text {
            margin: 0;
            font-family: 'Montserrat', sans-serif;
            font-size: 20px;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: 800;
            color: var(--premium-gold);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            padding: 25px;
            max-width: 960px;
            margin: 0 auto;
            justify-items: center;
        }

        .product-card {
            text-align: center;
        }

        .product-title {
            color: #ecd5b9;
            font-size: 26px;
            font-weight: 800;
            margin-bottom: 22px;
        }

        .card-frame {
            width: 320px;
            height: 320px;
            border: 5px solid #111;
            padding: 8px 14px;
            border-radius: 12px;
            box-shadow: 0 0 25px var(--border-blue);
            background: url('assets/background/back.png') center center / cover no-repeat;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .card-img {
            width: 278px;
            flex: 1;
            object-fit: cover;
            border: 2px solid gold;
            border-radius: 4px;
            display: block;
            height: 200px;
        }

        .card-label {
            color: #ecd5b9;
            /* Premium Beige/Gold */
            font-family: 'Montserrat', sans-serif;
            font-size: 16px;
            font-weight: 800;
            padding: 8px 10px 4px 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            text-align: center;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }

        .card-code {
            color: #ffffff;
            font-family: 'Questrial', sans-serif;
            font-size: 14px;
            font-weight: 500;
            padding: 2px 10px 10px 10px;
            text-shadow: 1px 1px 2px #000;
            text-align: center;
        }

        /* Shuffling glow effect */
        .shuffling .card-frame {
            animation: glowPulse 0.3s infinite alternate;
        }

        /* Modern Glassmorphic Labels */
        .label-text {
            display: inline-block;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 18px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-right: 10px;
            vertical-align: middle;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .card-code .label-text {
            font-size: 11px;
            padding: 2px 8px;
            letter-spacing: 1px;
        }

        @keyframes glowPulse {
            from {
                box-shadow: 0 0 20px #ff0000;
            }

            to {
                box-shadow: 0 0 60px #ff3300, 0 0 100px #ff6600;
            }
        }

        /* Physical 3D Drum Meter Style */
        .digit-box {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: #111;
            /* Gradient to simulate cylinder curvature */
            background: linear-gradient(180deg, #000 0%, #222 25%, #222 75%, #000 100%);
            color: #fff;
            width: 25px;
            height: 34px;
            border-radius: 3px;
            margin: 0 1.5px;
            font-family: 'Montserrat', sans-serif;
            font-size: 24px;
            font-weight: 800;
            border-left: 1px solid #333;
            border-right: 1px solid #333;
            box-shadow:
                0 2px 4px rgba(0, 0, 0, 0.5),
                inset 0 4px 6px rgba(0, 0, 0, 0.8),
                inset 0 -4px 6px rgba(0, 0, 0, 0.8);
            vertical-align: middle;
            position: relative;
        }

        .product-title .digit-box {
            width: 32px;
            height: 44px;
            font-size: 30px;
            color: #ffcc00;
            /* Gold digits for Header */
        }

        .card-code .digit-box {
            width: 20px;
            height: 28px;
            font-size: 18px;
        }

        .code-prefix {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: #1a1a1a;
            color: #ff4d4d;
            /* Sharp Red for Prefix */
            padding: 0 10px;
            height: 34px;
            border-radius: 4px;
            margin-right: 6px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 20px;
            border: 1px solid #333;
            box-shadow:
                0 2px 5px rgba(0, 0, 0, 0.5),
                inset 0 2px 2px rgba(255, 255, 255, 0.05);
            vertical-align: middle;
            text-shadow: 0 0 8px rgba(255, 77, 77, 0.4);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .product-title .code-prefix {
            height: 44px;
            font-size: 26px;
            padding: 0 12px;
        }

        .card-code .code-prefix {
            height: 28px;
            font-size: 16px;
            padding: 0 6px;
        }

        @media (max-width: 900px) {
            .grid-container {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 15px;
            }

            .card-frame {
                width: 320px;
                margin: 0 auto;
            }
        }

        @media (max-width: 600px) {
            .info-bar {
                padding: 10px;
                margin: 0;
                border-radius: 0;
            }

            .info-bar div {
                font-size: 14px !important;
                letter-spacing: 1px !important;
            }

            .product-title {
                font-size: 18px;
                margin-bottom: 12px;
            }

            .card-frame {
                width: 290px;
                height: 290px;
                min-height: auto;
                padding: 6px 10px;
            }

            .card-img {
                width: 100%;
                height: 160px;
            }

            .card-label {
                font-size: 14px;
                padding: 5px 0;
            }

            .digit-box {
                width: 18px;
                height: 26px;
                font-size: 16px;
                margin: 0 1px;
            }

            .code-prefix {
                height: 26px;
                padding: 0 6px;
                font-size: 14px;
            }

            .product-title .digit-box {
                width: 24px;
                height: 32px;
                font-size: 20px;
            }

            .product-title .code-prefix {
                height: 32px;
                font-size: 18px;
            }

            .label-text {
                font-size: 14px;
                padding: 3px 8px;
            }

            .btn-results {
                padding: 4px 20px;
                font-size: 16px;
            }
        }
    </style>

</head>

<body>

    <div class="header-actions">
        <a href="result.html" class="btn-results">RESULTS</a>
    </div>

    <div class="info-bar">
        <div id="currentDate" class="info-text">Date : -- -- ----</div>
        <div id="nextTime" class="info-text">Time : --:-- --</div>
    </div>

    <div class="grid-container" id="cardGrid">

        <div class="product-card" id="card-0">
            <div class="product-title" id="title-0">Product Code :</div>
            <div class="card-frame">
                <img class="card-img" id="img-0" src="assets/Kamala Yantra.PNG" alt="Yantra">
                <div class="card-label" id="name-0">NAVAGRAHA</div>
                <div class="card-code" id="code-0">Product Code --</div>
            </div>
        </div>

        <div class="product-card" id="card-1">
            <div class="product-title" id="title-1">Product Code :</div>
            <div class="card-frame">
                <img class="card-img" id="img-1" src="assets/Bhairav Yantra.PNG" alt="Yantra">
                <div class="card-label" id="name-1">RAJARANI MOHINI</div>
                <div class="card-code" id="code-1">Product Code --</div>
            </div>
        </div>

        <div class="product-card" id="card-2">
            <div class="product-title" id="title-2">Product Code :</div>
            <div class="card-frame">
                <img class="card-img" id="img-2" src="assets/Matsya Yantra.PNG" alt="Yantra">
                <div class="card-label" id="name-2">GAYATRI YANTRA</div>
                <div class="card-code" id="code-2">Product Code --</div>
            </div>
        </div>

        <div class="product-card" id="card-3">
            <div class="product-title" id="title-3">Product Code :</div>
            <div class="card-frame">
                <img class="card-img" id="img-3" src="assets/Ganesha Yantra.PNG" alt="Yantra">
                <div class="card-label" id="name-3">RAJARANI HUNDRED</div>
                <div class="card-code" id="code-3">Product Code --</div>
            </div>
        </div>

    </div>

    <script>
        const allImages = [
            'assets/Bhairav Yantra.PNG',
            'assets/Ganesha Yantra.PNG',
            'assets/Kamala Yantra.PNG',
            'assets/Kamala Yantra2.PNG',
            'assets/Matsya Yantra.PNG',
            'assets/Yantra Kamala.PNG',
            'assets/1323BSriYantra.jpg',
            'assets/ohm.png',
            'assets/Screenshot 2026-02-24 at 01-52-16 Shree Yantra Images \u2013 Browse 201 Stock Photos Vectors and Video Adobe Stock.png',
            'assets/Screenshot 2026-02-24 at 01-52-39 Shree Yantra Images \u2013 Browse 201 Stock Photos Vectors and Video Adobe Stock.png',
            'assets/Screenshot 2026-02-24 at 01-52-45 Shree Yantra Images \u2013 Browse 201 Stock Photos Vectors and Video Adobe Stock.png',
            'assets/Screenshot 2026-02-24 at 01-53-01 Shree Yantra Images \u2013 Browse 201 Stock Photos Vectors and Video Adobe Stock.png',
            'assets/Screenshot 2026-02-24 at 01-53-17 Shree Yantra Images \u2013 Browse 201 Stock Photos Vectors and Video Adobe Stock.png',
            'assets/Screenshot 2026-02-24 at 01-53-52 Shree yantra stock photos royalty-free images vectors video.png'
        ];

        const cardState = [
            { interval: null, lastResult: null, initialized: false },
            { interval: null, lastResult: null, initialized: false },
            { interval: null, lastResult: null, initialized: false },
            { interval: null, lastResult: null, initialized: false }
        ];

        function formatDate(date) {
            const d = date || new Date();
            const day = String(d.getDate()).padStart(2, '0');
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const year = d.getFullYear();
            return `${day}-${month}-${year}`;
        }

        function getRandomImage() {
            return allImages[Math.floor(Math.random() * allImages.length)];
        }

        // Helper to get 4 unique random images from the pool
        function getUniqueImages() {
            const shuffled = [...allImages].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, 4);
        }

        function startShuffle(i, targetCode) {
            if (cardState[i].interval) return;
            const card = document.getElementById(`card-${i}`);
            const img = document.getElementById(`img-${i}`);
            const title = document.getElementById(`title-${i}`);
            const code = document.getElementById(`code-${i}`);

            card.classList.add('shuffling');

            // 1. Image Shuffle
            cardState[i].interval = setInterval(() => {
                img.src = getRandomImage();
            }, 70);

            // 2. Pro Roller Logic (Petrol Meter Style)
            let prefix = "NG"; // Default fallback
            if (targetCode) {
                const match = targetCode.match(/^([A-Za-z]+)/);
                if (match) prefix = match[1];
            }

            cardState[i].textInterval = setInterval(() => {
                const d1 = Math.floor(Math.random() * 10);
                const d2 = Math.floor(Math.random() * 10);

                const html = `<span class="code-prefix">${prefix}</span><span class="digit-box">${d1}</span><span class="digit-box">${d2}</span>`;
                title.innerHTML = `<span class="label-text">Product Code </span> ${html}`;
                code.innerHTML = `<span class="label-text">Product Code </span> ${html}`;
            }, 60);
        }

        function stopShuffle(i, winCode, finalImg) {
            const state = cardState[i];
            if (state.interval) {
                clearInterval(state.interval);
                state.interval = null;
            }
            if (state.textInterval) {
                clearInterval(state.textInterval);
                state.textInterval = null;
            }

            const card = document.getElementById(`card-${i}`);
            const img = document.getElementById(`img-${i}`);
            const code = document.getElementById(`code-${i}`);
            const title = document.getElementById(`title-${i}`);

            card.classList.remove('shuffling');
            img.src = finalImg || getRandomImage();

            if (winCode) {
                const match = winCode.match(/^([A-Za-z]+)(.*)$/);
                if (match) {
                    const prefix = match[1];
                    const digits = match[2].split('');
                    const html = `<span class="code-prefix">${prefix}</span>${digits.map(d => `<span class="digit-box">${d}</span>`).join('')}`;
                    title.innerHTML = `<span class="label-text">Product Code </span> ${html}`;
                    code.innerHTML = `<span class="label-text">Product Code </span> ${html}`;
                } else {
                    title.innerHTML = `<span class="label-text">Product Code </span> ${winCode}`;
                    code.innerHTML = `<span class="label-text">Product Code </span> ${winCode}`;
                }
            } else {
                title.innerHTML = '<span class="label-text">Product Code </span>';
                code.innerHTML = '<span class="label-text">Product Code </span> --';
            }
        }

        async function fetchDetails() {
            try {
                const res = await fetch(CONFIG.GAME_DETAILS_URL);
                const json = await res.json();

                if (!json.status || !json.data) return;
                const data = json.data;

                // Date/time bar
                const d = new Date();
                const todayStr = d.getFullYear() + '-' + String(d.getMonth() + 1).padStart(2, '0') + '-' + String(d.getDate()).padStart(2, '0');
                const apiDateStr = data.date || '';

                document.getElementById('currentDate').innerText = `Date : ${formatDate(d)}`;

                const results = data.prev_game_results || [];
                const batchImages = getUniqueImages();

                // Header Time Logic: Show the time of the LAST PUBLISHED result
                if (results.length > 0 && results[0].time && results[0].time !== '00:00') {
                    let [h, m] = results[0].time.split(':');
                    const ampm = +h >= 12 ? 'PM' : 'AM';
                    h = +h % 12 || 12;
                    document.getElementById('nextTime').innerText = `Time : ${h}:${m} ${ampm}`;
                } else {
                    document.getElementById('nextTime').innerText = `Time : --:-- --`;
                }

                for (let i = 0; i < 4; i++) {
                    const state = cardState[i];
                    const r = results[i];
                    const finalImg = batchImages[i];

                    const winCode = (r && r.win_code && r.win_code !== '--') ? r.win_code : null;
                    const resTime = (r && r.time) ? r.time : '';
                    const signature = winCode ? `${winCode}-${resTime}` : null;

                    // Determine the correct prefix (e.g., NG, AA, etc.) from the API data
                    const currentPrefix = (r && r.win_code) ? r.win_code.match(/^([A-Za-z]+)/)?.[1] : "NG";



                    if (!state.initialized) {
                        state.initialized = true;
                        if (winCode) {
                            state.lastSig = signature;
                            if (!state.interval) startShuffle(i, winCode);
                            const ci = i, cw = winCode;
                            setTimeout(() => stopShuffle(ci, cw, finalImg), 10000);
                        } else {
                            state.lastSig = null;
                            startShuffle(i, currentPrefix);
                        }
                    } else {
                        if (!winCode) {
                            state.lastSig = null;
                            if (!state.interval) startShuffle(i, currentPrefix);
                        } else if (state.lastSig !== signature) {
                            state.lastSig = signature;
                            if (!state.interval) startShuffle(i, winCode);
                            const ci = i, cw = winCode;
                            setTimeout(() => stopShuffle(ci, cw, finalImg), 10000);
                        }
                    }
                }
            } catch (e) {
                console.error('fetchDetails error:', e);
            }
        }

        fetchDetails();
        setInterval(fetchDetails, 30000);
    </script>
</body>

</html>